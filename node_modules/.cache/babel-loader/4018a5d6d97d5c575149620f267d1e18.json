{"ast":null,"code":"import _classCallCheck from \"/home/fefe/Develop/mucca-project/mucca_frontend_admin/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/fefe/Develop/mucca-project/mucca_frontend_admin/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/fefe/Develop/mucca-project/mucca_frontend_admin/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/fefe/Develop/mucca-project/mucca_frontend_admin/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/fefe/Develop/mucca-project/mucca_frontend_admin/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport { Component } from \"react\";\nimport axios from \"axios\";\nimport Cookies from \"universal-cookie\";\nvar cookies = new Cookies();\nexport var Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login() {\n    _classCallCheck(this, Login);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Login).apply(this, arguments));\n  }\n\n  _createClass(Login, [{\n    key: \"authorization\",\n    value: function authorization(token, key, callback) {\n      var authorizationUrl = process.env.REACT_APP_SERV_URL + \"/v1/authorization\";\n      console.log(\"authorization -> \", token, key);\n      axios({\n        method: \"get\",\n        url: authorizationUrl,\n        headers: {\n          \"Content-Type\": \"application/json\",\n          token: token,\n          key: key\n        },\n        data: \"\"\n      }).then(function (response) {\n        console.log(\"get authorization -> \", response.data.username);\n        cookies.set(\"username\", response.data.username, {\n          path: \"/\"\n        });\n        console.log(\"by cookies -> \", cookies.get(\"username\"));\n        callback(true);\n      }).catch(function (error) {\n        cookies.remove(\"username\", {\n          path: \"/\"\n        });\n        cookies.remove(\"userToken\", {\n          path: \"/\"\n        });\n        cookies.remove(\"userKey\", {\n          path: \"/\"\n        });\n        callback(false);\n      });\n    }\n  }, {\n    key: \"authentication\",\n    value: function authentication(username, password, environment, callback) {\n      var authenticationUrl = process.env.REACT_APP_SERV_URL + \"/v1/authentication\";\n      var self = this;\n      axios({\n        method: \"post\",\n        url: authenticationUrl,\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        data: {\n          username: username,\n          password: password,\n          environment: environment\n        }\n      }).then(function (response) {\n        console.log(response);\n        console.log(response.data.token);\n        console.log(response.data.key);\n        cookies.set(\"userToken\", response.data.token, {\n          path: \"/\"\n        });\n        console.log(\"by cookies -> \", cookies.get(\"userToken\"));\n        cookies.set(\"userKey\", response.data.key, {\n          path: \"/\"\n        });\n        console.log(\"by cookies -> \", cookies.get(\"userKey\"));\n        cookies.set(\"userEnv\", environment, {\n          path: \"/\"\n        });\n        console.log(\"by cookies -> \", cookies.get(\"userEnv\"));\n        self.authorization(cookies.get(\"userToken\"), cookies.get(\"userKey\"), callback);\n      }).catch(function (error) {\n        cookies.remove(\"username\", {\n          path: \"/\"\n        });\n        cookies.remove(\"userToken\", {\n          path: \"/\"\n        });\n        cookies.remove(\"userKey\", {\n          path: \"/\"\n        });\n        cookies.remove(\"userEnv\", {\n          path: \"/\"\n        });\n        callback(false);\n      });\n    }\n  }, {\n    key: \"logout\",\n    value: function logout() {\n      var authorizationUrl = process.env.REACT_APP_SERV_URL + \"/v1/logout\";\n      axios({\n        method: \"get\",\n        url: authorizationUrl,\n        headers: {\n          \"Content-Type\": \"application/json\",\n          token: cookies.get(\"userToken\"),\n          key: cookies.get(\"userKey\")\n        }\n      }).then(function (response) {\n        console.log(\"logout request success\");\n        cookies.remove(\"username\", {\n          path: \"/\"\n        });\n        cookies.remove(\"userToken\", {\n          path: \"/\"\n        });\n        cookies.remove(\"userKey\", {\n          path: \"/\"\n        });\n        cookies.remove(\"userEnv\", {\n          path: \"/\"\n        });\n        window.location.reload();\n      }).catch(function (error) {\n        console.log(\"logout failure\");\n      });\n    }\n  }]);\n\n  return Login;\n}(Component);\nexport default Login;","map":{"version":3,"sources":["/home/fefe/Develop/mucca-project/mucca_frontend_admin/src/Login/Login.jsx"],"names":["Component","axios","Cookies","cookies","Login","token","key","callback","authorizationUrl","process","env","REACT_APP_SERV_URL","console","log","method","url","headers","data","then","response","username","set","path","get","catch","error","remove","password","environment","authenticationUrl","self","authorization","window","location","reload"],"mappings":"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","sourcesContent":["import { Component } from \"react\";\nimport axios from \"axios\";\nimport Cookies from \"universal-cookie\";\n\nconst cookies = new Cookies();\n\nexport class Login extends Component {\n  authorization(token, key, callback) {\n    let authorizationUrl = process.env.REACT_APP_SERV_URL + \"/v1/authorization\";\n    console.log(\"authorization -> \", token, key);\n\n    axios({\n      method: \"get\",\n      url: authorizationUrl,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        token: token,\n        key: key\n      },\n      data: \"\"\n    })\n      .then(function(response) {\n        console.log(\"get authorization -> \", response.data.username);\n\n        cookies.set(\"username\", response.data.username, { path: \"/\" });\n        console.log(\"by cookies -> \", cookies.get(\"username\"));\n        callback(true);\n      })\n      .catch(function(error) {\n        cookies.remove(\"username\", { path: \"/\" });\n        cookies.remove(\"userToken\", { path: \"/\" });\n        cookies.remove(\"userKey\", { path: \"/\" });\n        callback(false);\n      });\n  }\n\n  authentication(username, password, environment, callback) {\n    let authenticationUrl =\n      process.env.REACT_APP_SERV_URL + \"/v1/authentication\";\n    var self = this;\n    axios({\n      method: \"post\",\n      url: authenticationUrl,\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      data: {\n        username: username,\n        password: password,\n        environment: environment\n      }\n    })\n      .then(function(response) {\n        console.log(response);\n        console.log(response.data.token);\n        console.log(response.data.key);\n\n        cookies.set(\"userToken\", response.data.token, { path: \"/\" });\n        console.log(\"by cookies -> \", cookies.get(\"userToken\"));\n\n        cookies.set(\"userKey\", response.data.key, { path: \"/\" });\n        console.log(\"by cookies -> \", cookies.get(\"userKey\"));\n\n        cookies.set(\"userEnv\", environment, { path: \"/\" });\n        console.log(\"by cookies -> \", cookies.get(\"userEnv\"));\n        self.authorization(\n          cookies.get(\"userToken\"),\n          cookies.get(\"userKey\"),\n          callback\n        );\n      })\n      .catch(function(error) {\n        cookies.remove(\"username\", { path: \"/\" });\n        cookies.remove(\"userToken\", { path: \"/\" });\n        cookies.remove(\"userKey\", { path: \"/\" });\n        cookies.remove(\"userEnv\", { path: \"/\" });\n        callback(false);\n      });\n  }\n\n  logout() {\n    let authorizationUrl = process.env.REACT_APP_SERV_URL + \"/v1/logout\";\n\n    axios({\n      method: \"get\",\n      url: authorizationUrl,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        token: cookies.get(\"userToken\"),\n        key: cookies.get(\"userKey\")\n      }\n    })\n      .then(function(response) {\n        console.log(\"logout request success\");\n\n        cookies.remove(\"username\", { path: \"/\" });\n        cookies.remove(\"userToken\", { path: \"/\" });\n        cookies.remove(\"userKey\", { path: \"/\" });\n        cookies.remove(\"userEnv\", { path: \"/\" });\n        window.location.reload();\n      })\n      .catch(function(error) {\n        console.log(\"logout failure\");\n      });\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}