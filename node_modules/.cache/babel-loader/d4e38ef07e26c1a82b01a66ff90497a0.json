{"ast":null,"code":"import _classCallCheck from \"/home/fefe/Develop/mucca-project/mucca_frontend_admin/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\n// *******************Note*******************************\n// ##service: microservizio da chiamare\n// ##dataToPost: dati da inserire nel body della richiesta\n// (deve essere precedentemente formattato e passato come oggetto {})\n// ##query: da passare come null se la read è semplice, preformattata\n// come oggetto per essere passata direttamente se composta(ad es skip/limit/fields/filtri)\n// ##callback:funzione che nel componente da cui chiamo l'api gestirà la risposta per fornirla\n// al render\nimport Cookies from \"universal-cookie\";\nimport axios from \"axios\";\nvar cookies = new Cookies();\nexport var Api = function Api() {\n  _classCallCheck(this, Api);\n\n  this.getCookies = function (callback) {\n    var userToken = Promise.resolve(cookies.get(\"userToken\"));\n    var userKey = Promise.resolve(cookies.get(\"userKey\"));\n    Promise.all([userToken, userKey]).then(function (result) {\n      var gotToken = result[0];\n      var gotKey = result[1];\n\n      if (gotToken && gotKey) {\n        var headers = [gotToken, gotKey];\n        return callback(headers);\n      } else {\n        return callback(undefined);\n      }\n    });\n  };\n\n  this.create = function (dataToPost, callback) {\n    var userToken = Promise.resolve(cookies.get(\"userToken\"));\n    var userKey = Promise.resolve(cookies.get(\"userKey\"));\n    var userEnv = Promise.resolve(cookies.get(\"userEnv\"));\n    var url = process.env.REACT_APP_SERV_URL;\n    var version = process.env.REACT_APP_VERSION;\n    var action = process.env.REACT_APP_ACTION_C;\n    var fullPath = url + \"/\" + version + \"/\" + action + \"/\" + userEnv;\n    Promise.all([userToken, userKey]).then(function (result) {\n      var gotToken = result[0];\n      var gotKey = result[1];\n\n      if (gotToken && gotKey) {\n        var headers = {\n          \"Content-Type\": \"application/json; charset=utf-8\",\n          token: gotToken,\n          key: gotKey\n        };\n        return headers;\n      }\n    }).then(function (res) {\n      axios({\n        method: \"post\",\n        url: fullPath,\n        headers: res,\n        data: dataToPost\n      }).then(function (res) {\n        return callback(res);\n      }).catch(function (error) {\n        console.log(\"error in api\", error);\n        return callback(error.response);\n      });\n    });\n  };\n\n  this.update = function (dataToPost, callback) {\n    var userToken = Promise.resolve(cookies.get(\"userToken\"));\n    var userKey = Promise.resolve(cookies.get(\"userKey\"));\n    var userEnv = Promise.resolve(cookies.get(\"userEnv\"));\n    var url = process.env.REACT_APP_SERV_URL;\n    var version = process.env.REACT_APP_VERSION;\n    var action = process.env.REACT_APP_ACTION_U;\n    var fullPath = url + \"/\" + version + \"/\" + action + \"/\" + userEnv;\n    Promise.all([userToken, userKey]).then(function (result) {\n      var gotToken = result[0];\n      var gotKey = result[1];\n\n      if (gotToken && gotKey) {\n        var headers = {\n          \"Content-Type\": \"application/json; charset=utf-8\",\n          token: gotToken,\n          key: gotKey\n        };\n        return headers;\n      }\n    }).then(function (res) {\n      axios({\n        method: \"post\",\n        url: fullPath,\n        headers: res,\n        data: dataToPost\n      }).then(function (res) {\n        return callback(res);\n      }).catch(function (error) {\n        console.log(\"error in api\", error);\n        return callback(error.response);\n      });\n    });\n  };\n\n  this.delete = function (service, id, callback) {\n    var userToken = Promise.resolve(cookies.get(\"userToken\"));\n    var userKey = Promise.resolve(cookies.get(\"userKey\"));\n    var userEnv = Promise.resolve(cookies.get(\"userEnv\"));\n    var url = process.env.REACT_APP_SERV_URL;\n    var version = process.env.REACT_APP_VERSION;\n    var action = process.env.REACT_APP_ACTION_D;\n    var fullPath = url + \"/\" + version + \"/\" + action + \"/\" + userEnv;\n    Promise.all([userToken, userKey]).then(function (result) {\n      var gotToken = result[0];\n      var gotKey = result[1];\n\n      if (gotToken && gotKey) {\n        var headers = {\n          \"Content-Type\": \"application/json; charset=utf-8\",\n          token: gotToken,\n          key: gotKey\n        };\n        return headers;\n      }\n    }).then(function (res) {\n      axios({\n        method: \"post\",\n        url: fullPath,\n        headers: res\n      }).then(function (res) {\n        return callback(res);\n      }).catch(function (error) {\n        console.log(\"error in api\", error);\n        return callback(error.response);\n      });\n    });\n  };\n\n  this.read = function (env, query, callback) {\n    var userToken = Promise.resolve(cookies.get(\"userToken\"));\n    var userKey = Promise.resolve(cookies.get(\"userKey\"));\n    var userEnv = Promise.resolve(cookies.get(\"userEnv\"));\n    var url = process.env.REACT_APP_SERV_URL;\n    var version = process.env.REACT_APP_VERSION;\n    var action = process.env.REACT_APP_ACTION_R;\n    var fullPath = url + \"/\" + version + \"/\" + action + \"/\" + env + \"/\" + query;\n    Promise.all([userToken, userKey]).then(function (result) {\n      var gotToken = result[0];\n      var gotKey = result[1];\n\n      if (gotToken && gotKey) {\n        var headers = {\n          \"Content-Type\": \"application/json; charset=utf-8\",\n          token: gotToken,\n          key: gotKey\n        };\n        return headers;\n      }\n    }).then(function (res) {\n      axios({\n        method: \"get\",\n        url: fullPath,\n        headers: res\n      }).then(function (res) {\n        return callback(res);\n      }).catch(function (error) {\n        return callback(error.response);\n      });\n    });\n  };\n\n  this.authentication = function (dataToPost, callback) {\n    var url = process.env.REACT_APP_SERV_URL;\n    var version = process.env.REACT_APP_VERSION;\n    var action = process.env.REACT_APP_ACTION_AUTH;\n    var fullPath = url + \"/\" + version + \"/\" + action;\n    axios({\n      method: \"post\",\n      url: fullPath,\n      headers: {\n        \"Content-Type\": \"application/json; charset=utf-8\"\n      },\n      data: dataToPost\n    }).then(function (res) {\n      return callback(res);\n    }).catch(function (error) {\n      console.log(\"error in api\", error);\n      return callback(error.response);\n    });\n  };\n\n  this.authorization = function (callback) {\n    var url = process.env.REACT_APP_SERV_URL;\n    var version = process.env.REACT_APP_VERSION;\n    var action = process.env.REACT_APP_ACTION_AUTHO;\n    var fullPath = url + \"/\" + version + \"/\" + action;\n    var userToken = Promise.resolve(cookies.get(\"userToken\"));\n    var userKey = Promise.resolve(cookies.get(\"userKey\"));\n    Promise.all([userToken, userKey]).then(function (result) {\n      var gotToken = result[0];\n      var gotKey = result[1];\n\n      if (gotToken && gotKey) {\n        var headers = {\n          \"Content-Type\": \"application/json; charset=utf-8\",\n          token: gotToken,\n          key: gotKey\n        };\n        return headers;\n      }\n    }).then(function (res) {\n      axios({\n        method: \"get\",\n        url: fullPath,\n        headers: res\n      }).then(function (res) {\n        return callback(res);\n      }).catch(function (error) {\n        console.log(\"error in api\", error);\n        return callback(error.response);\n      });\n    });\n  };\n\n  this.logout = function (callback) {\n    var url = process.env.REACT_APP_SERV_URL;\n    var version = process.env.REACT_APP_VERSION;\n    var action = process.env.REACT_APP_ACTION_LOGOUT;\n    var fullPath = url + \"/\" + version + \"/\" + action;\n    var userToken = Promise.resolve(cookies.get(\"userToken\"));\n    var userKey = Promise.resolve(cookies.get(\"userKey\"));\n    Promise.all([userToken, userKey]).then(function (result) {\n      var gotToken = result[0];\n      var gotKey = result[1];\n\n      if (gotToken && gotKey) {\n        var headers = {\n          \"Content-Type\": \"application/json; charset=utf-8\",\n          token: gotToken,\n          key: gotKey\n        };\n        return headers;\n      }\n    }).then(function (res) {\n      axios({\n        method: \"get\",\n        url: fullPath,\n        headers: res\n      }).then(function (res) {\n        return callback(res);\n      }).catch(function (error) {\n        console.log(\"error in api\", error);\n        return callback(error.response);\n      });\n    });\n  };\n};\nexport default Api;","map":{"version":3,"sources":["/home/fefe/Develop/mucca-project/mucca_frontend_admin/src/api.js"],"names":["Cookies","axios","cookies","Api","getCookies","callback","userToken","Promise","resolve","get","userKey","all","then","result","gotToken","gotKey","headers","undefined","create","dataToPost","userEnv","url","process","env","REACT_APP_SERV_URL","version","REACT_APP_VERSION","action","REACT_APP_ACTION_C","fullPath","token","key","res","method","data","catch","error","console","log","response","update","REACT_APP_ACTION_U","delete","service","id","REACT_APP_ACTION_D","read","query","REACT_APP_ACTION_R","authentication","REACT_APP_ACTION_AUTH","authorization","REACT_APP_ACTION_AUTHO","logout","REACT_APP_ACTION_LOGOUT"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAOA,OAAP,MAAoB,kBAApB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,IAAIC,OAAO,GAAG,IAAIF,OAAJ,EAAd;AAEA,WAAaG,GAAb;AAAA;;AAAA,OACEC,UADF,GACe,UAAAC,QAAQ,EAAI;AACvB,QAAIC,SAAS,GAAGC,OAAO,CAACC,OAAR,CAAgBN,OAAO,CAACO,GAAR,CAAY,WAAZ,CAAhB,CAAhB;AACA,QAAIC,OAAO,GAAGH,OAAO,CAACC,OAAR,CAAgBN,OAAO,CAACO,GAAR,CAAY,SAAZ,CAAhB,CAAd;AACAF,IAAAA,OAAO,CAACI,GAAR,CAAY,CAACL,SAAD,EAAYI,OAAZ,CAAZ,EAAkCE,IAAlC,CAAuC,UAASC,MAAT,EAAiB;AACtD,UAAIC,QAAQ,GAAGD,MAAM,CAAC,CAAD,CAArB;AACA,UAAIE,MAAM,GAAGF,MAAM,CAAC,CAAD,CAAnB;;AACA,UAAIC,QAAQ,IAAIC,MAAhB,EAAwB;AACtB,YAAIC,OAAO,GAAG,CAACF,QAAD,EAAWC,MAAX,CAAd;AACA,eAAOV,QAAQ,CAACW,OAAD,CAAf;AACD,OAHD,MAGO;AACL,eAAOX,QAAQ,CAACY,SAAD,CAAf;AACD;AACF,KATD;AAUD,GAdH;;AAAA,OAgBEC,MAhBF,GAgBW,UAACC,UAAD,EAAad,QAAb,EAA0B;AACjC,QAAIC,SAAS,GAAGC,OAAO,CAACC,OAAR,CAAgBN,OAAO,CAACO,GAAR,CAAY,WAAZ,CAAhB,CAAhB;AACA,QAAIC,OAAO,GAAGH,OAAO,CAACC,OAAR,CAAgBN,OAAO,CAACO,GAAR,CAAY,SAAZ,CAAhB,CAAd;AACA,QAAIW,OAAO,GAAGb,OAAO,CAACC,OAAR,CAAgBN,OAAO,CAACO,GAAR,CAAY,SAAZ,CAAhB,CAAd;AACA,QAAIY,GAAG,GAAGC,OAAO,CAACC,GAAR,CAAYC,kBAAtB;AACA,QAAIC,OAAO,GAAGH,OAAO,CAACC,GAAR,CAAYG,iBAA1B;AACA,QAAIC,MAAM,GAAGL,OAAO,CAACC,GAAR,CAAYK,kBAAzB;AACA,QAAIC,QAAQ,GAAGR,GAAG,GAAG,GAAN,GAAYI,OAAZ,GAAsB,GAAtB,GAA4BE,MAA5B,GAAqC,GAArC,GAA2CP,OAA1D;AACAb,IAAAA,OAAO,CAACI,GAAR,CAAY,CAACL,SAAD,EAAYI,OAAZ,CAAZ,EACGE,IADH,CACQ,UAASC,MAAT,EAAiB;AACrB,UAAIC,QAAQ,GAAGD,MAAM,CAAC,CAAD,CAArB;AACA,UAAIE,MAAM,GAAGF,MAAM,CAAC,CAAD,CAAnB;;AACA,UAAIC,QAAQ,IAAIC,MAAhB,EAAwB;AACtB,YAAIC,OAAO,GAAG;AACZ,0BAAgB,iCADJ;AAEZc,UAAAA,KAAK,EAAEhB,QAFK;AAGZiB,UAAAA,GAAG,EAAEhB;AAHO,SAAd;AAKA,eAAOC,OAAP;AACD;AACF,KAZH,EAaGJ,IAbH,CAaQ,UAAAoB,GAAG,EAAI;AACX/B,MAAAA,KAAK,CAAC;AACJgC,QAAAA,MAAM,EAAE,MADJ;AAEJZ,QAAAA,GAAG,EAAEQ,QAFD;AAGJb,QAAAA,OAAO,EAAEgB,GAHL;AAIJE,QAAAA,IAAI,EAAEf;AAJF,OAAD,CAAL,CAMGP,IANH,CAMQ,UAAAoB,GAAG,EAAI;AACX,eAAO3B,QAAQ,CAAC2B,GAAD,CAAf;AACD,OARH,EASGG,KATH,CASS,UAASC,KAAT,EAAgB;AACrBC,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BF,KAA5B;AACA,eAAO/B,QAAQ,CAAC+B,KAAK,CAACG,QAAP,CAAf;AACD,OAZH;AAaD,KA3BH;AA4BD,GApDH;;AAAA,OAsDEC,MAtDF,GAsDW,UAACrB,UAAD,EAAad,QAAb,EAA0B;AACjC,QAAIC,SAAS,GAAGC,OAAO,CAACC,OAAR,CAAgBN,OAAO,CAACO,GAAR,CAAY,WAAZ,CAAhB,CAAhB;AACA,QAAIC,OAAO,GAAGH,OAAO,CAACC,OAAR,CAAgBN,OAAO,CAACO,GAAR,CAAY,SAAZ,CAAhB,CAAd;AACA,QAAIW,OAAO,GAAGb,OAAO,CAACC,OAAR,CAAgBN,OAAO,CAACO,GAAR,CAAY,SAAZ,CAAhB,CAAd;AACA,QAAIY,GAAG,GAAGC,OAAO,CAACC,GAAR,CAAYC,kBAAtB;AACA,QAAIC,OAAO,GAAGH,OAAO,CAACC,GAAR,CAAYG,iBAA1B;AACA,QAAIC,MAAM,GAAGL,OAAO,CAACC,GAAR,CAAYkB,kBAAzB;AACA,QAAIZ,QAAQ,GAAGR,GAAG,GAAG,GAAN,GAAYI,OAAZ,GAAsB,GAAtB,GAA4BE,MAA5B,GAAqC,GAArC,GAA2CP,OAA1D;AAEAb,IAAAA,OAAO,CAACI,GAAR,CAAY,CAACL,SAAD,EAAYI,OAAZ,CAAZ,EACGE,IADH,CACQ,UAASC,MAAT,EAAiB;AACrB,UAAIC,QAAQ,GAAGD,MAAM,CAAC,CAAD,CAArB;AACA,UAAIE,MAAM,GAAGF,MAAM,CAAC,CAAD,CAAnB;;AACA,UAAIC,QAAQ,IAAIC,MAAhB,EAAwB;AACtB,YAAIC,OAAO,GAAG;AACZ,0BAAgB,iCADJ;AAEZc,UAAAA,KAAK,EAAEhB,QAFK;AAGZiB,UAAAA,GAAG,EAAEhB;AAHO,SAAd;AAKA,eAAOC,OAAP;AACD;AACF,KAZH,EAaGJ,IAbH,CAaQ,UAAAoB,GAAG,EAAI;AACX/B,MAAAA,KAAK,CAAC;AACJgC,QAAAA,MAAM,EAAE,MADJ;AAEJZ,QAAAA,GAAG,EAAEQ,QAFD;AAGJb,QAAAA,OAAO,EAAEgB,GAHL;AAIJE,QAAAA,IAAI,EAAEf;AAJF,OAAD,CAAL,CAMGP,IANH,CAMQ,UAAAoB,GAAG,EAAI;AACX,eAAO3B,QAAQ,CAAC2B,GAAD,CAAf;AACD,OARH,EASGG,KATH,CASS,UAASC,KAAT,EAAgB;AACrBC,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BF,KAA5B;AACA,eAAO/B,QAAQ,CAAC+B,KAAK,CAACG,QAAP,CAAf;AACD,OAZH;AAaD,KA3BH;AA4BD,GA3FH;;AAAA,OA6FEG,MA7FF,GA6FW,UAACC,OAAD,EAAUC,EAAV,EAAcvC,QAAd,EAA2B;AAClC,QAAIC,SAAS,GAAGC,OAAO,CAACC,OAAR,CAAgBN,OAAO,CAACO,GAAR,CAAY,WAAZ,CAAhB,CAAhB;AACA,QAAIC,OAAO,GAAGH,OAAO,CAACC,OAAR,CAAgBN,OAAO,CAACO,GAAR,CAAY,SAAZ,CAAhB,CAAd;AACA,QAAIW,OAAO,GAAGb,OAAO,CAACC,OAAR,CAAgBN,OAAO,CAACO,GAAR,CAAY,SAAZ,CAAhB,CAAd;AACA,QAAIY,GAAG,GAAGC,OAAO,CAACC,GAAR,CAAYC,kBAAtB;AACA,QAAIC,OAAO,GAAGH,OAAO,CAACC,GAAR,CAAYG,iBAA1B;AACA,QAAIC,MAAM,GAAGL,OAAO,CAACC,GAAR,CAAYsB,kBAAzB;AACA,QAAIhB,QAAQ,GAAGR,GAAG,GAAG,GAAN,GAAYI,OAAZ,GAAsB,GAAtB,GAA4BE,MAA5B,GAAqC,GAArC,GAA2CP,OAA1D;AAEAb,IAAAA,OAAO,CAACI,GAAR,CAAY,CAACL,SAAD,EAAYI,OAAZ,CAAZ,EACGE,IADH,CACQ,UAASC,MAAT,EAAiB;AACrB,UAAIC,QAAQ,GAAGD,MAAM,CAAC,CAAD,CAArB;AACA,UAAIE,MAAM,GAAGF,MAAM,CAAC,CAAD,CAAnB;;AACA,UAAIC,QAAQ,IAAIC,MAAhB,EAAwB;AACtB,YAAIC,OAAO,GAAG;AACZ,0BAAgB,iCADJ;AAEZc,UAAAA,KAAK,EAAEhB,QAFK;AAGZiB,UAAAA,GAAG,EAAEhB;AAHO,SAAd;AAKA,eAAOC,OAAP;AACD;AACF,KAZH,EAaGJ,IAbH,CAaQ,UAAAoB,GAAG,EAAI;AACX/B,MAAAA,KAAK,CAAC;AACJgC,QAAAA,MAAM,EAAE,MADJ;AAEJZ,QAAAA,GAAG,EAAEQ,QAFD;AAGJb,QAAAA,OAAO,EAAEgB;AAHL,OAAD,CAAL,CAKGpB,IALH,CAKQ,UAAAoB,GAAG,EAAI;AACX,eAAO3B,QAAQ,CAAC2B,GAAD,CAAf;AACD,OAPH,EAQGG,KARH,CAQS,UAASC,KAAT,EAAgB;AACrBC,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BF,KAA5B;AACA,eAAO/B,QAAQ,CAAC+B,KAAK,CAACG,QAAP,CAAf;AACD,OAXH;AAYD,KA1BH;AA2BD,GAjIH;;AAAA,OAmIEO,IAnIF,GAmIS,UAACvB,GAAD,EAAMwB,KAAN,EAAa1C,QAAb,EAA0B;AAC/B,QAAIC,SAAS,GAAGC,OAAO,CAACC,OAAR,CAAgBN,OAAO,CAACO,GAAR,CAAY,WAAZ,CAAhB,CAAhB;AACA,QAAIC,OAAO,GAAGH,OAAO,CAACC,OAAR,CAAgBN,OAAO,CAACO,GAAR,CAAY,SAAZ,CAAhB,CAAd;AACA,QAAIW,OAAO,GAAGb,OAAO,CAACC,OAAR,CAAgBN,OAAO,CAACO,GAAR,CAAY,SAAZ,CAAhB,CAAd;AACA,QAAIY,GAAG,GAAGC,OAAO,CAACC,GAAR,CAAYC,kBAAtB;AACA,QAAIC,OAAO,GAAGH,OAAO,CAACC,GAAR,CAAYG,iBAA1B;AACA,QAAIC,MAAM,GAAGL,OAAO,CAACC,GAAR,CAAYyB,kBAAzB;AACA,QAAInB,QAAQ,GAAGR,GAAG,GAAG,GAAN,GAAYI,OAAZ,GAAsB,GAAtB,GAA4BE,MAA5B,GAAqC,GAArC,GAA2CJ,GAA3C,GAAiD,GAAjD,GAAuDwB,KAAtE;AACAxC,IAAAA,OAAO,CAACI,GAAR,CAAY,CAACL,SAAD,EAAYI,OAAZ,CAAZ,EACGE,IADH,CACQ,UAASC,MAAT,EAAiB;AACrB,UAAIC,QAAQ,GAAGD,MAAM,CAAC,CAAD,CAArB;AACA,UAAIE,MAAM,GAAGF,MAAM,CAAC,CAAD,CAAnB;;AACA,UAAIC,QAAQ,IAAIC,MAAhB,EAAwB;AACtB,YAAIC,OAAO,GAAG;AACZ,0BAAgB,iCADJ;AAEZc,UAAAA,KAAK,EAAEhB,QAFK;AAGZiB,UAAAA,GAAG,EAAEhB;AAHO,SAAd;AAKA,eAAOC,OAAP;AACD;AACF,KAZH,EAaGJ,IAbH,CAaQ,UAAAoB,GAAG,EAAI;AACX/B,MAAAA,KAAK,CAAC;AACJgC,QAAAA,MAAM,EAAE,KADJ;AAEJZ,QAAAA,GAAG,EAAEQ,QAFD;AAGJb,QAAAA,OAAO,EAAEgB;AAHL,OAAD,CAAL,CAKGpB,IALH,CAKQ,UAAAoB,GAAG,EAAI;AACX,eAAO3B,QAAQ,CAAC2B,GAAD,CAAf;AACD,OAPH,EAQGG,KARH,CAQS,UAASC,KAAT,EAAgB;AACrB,eAAO/B,QAAQ,CAAC+B,KAAK,CAACG,QAAP,CAAf;AACD,OAVH;AAWD,KAzBH;AA0BD,GArKH;;AAAA,OAuKEU,cAvKF,GAuKmB,UAAC9B,UAAD,EAAad,QAAb,EAA0B;AACzC,QAAIgB,GAAG,GAAGC,OAAO,CAACC,GAAR,CAAYC,kBAAtB;AACA,QAAIC,OAAO,GAAGH,OAAO,CAACC,GAAR,CAAYG,iBAA1B;AAEA,QAAIC,MAAM,GAAGL,OAAO,CAACC,GAAR,CAAY2B,qBAAzB;AACA,QAAIrB,QAAQ,GAAGR,GAAG,GAAG,GAAN,GAAYI,OAAZ,GAAsB,GAAtB,GAA4BE,MAA3C;AACA1B,IAAAA,KAAK,CAAC;AACJgC,MAAAA,MAAM,EAAE,MADJ;AAEJZ,MAAAA,GAAG,EAAEQ,QAFD;AAGJb,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAHL;AAMJkB,MAAAA,IAAI,EAAEf;AANF,KAAD,CAAL,CAQGP,IARH,CAQQ,UAAAoB,GAAG,EAAI;AACX,aAAO3B,QAAQ,CAAC2B,GAAD,CAAf;AACD,KAVH,EAWGG,KAXH,CAWS,UAASC,KAAT,EAAgB;AACrBC,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BF,KAA5B;AACA,aAAO/B,QAAQ,CAAC+B,KAAK,CAACG,QAAP,CAAf;AACD,KAdH;AAeD,GA5LH;;AAAA,OA8LEY,aA9LF,GA8LkB,UAAA9C,QAAQ,EAAI;AAC1B,QAAIgB,GAAG,GAAGC,OAAO,CAACC,GAAR,CAAYC,kBAAtB;AACA,QAAIC,OAAO,GAAGH,OAAO,CAACC,GAAR,CAAYG,iBAA1B;AAEA,QAAIC,MAAM,GAAGL,OAAO,CAACC,GAAR,CAAY6B,sBAAzB;AACA,QAAIvB,QAAQ,GAAGR,GAAG,GAAG,GAAN,GAAYI,OAAZ,GAAsB,GAAtB,GAA4BE,MAA3C;AACA,QAAIrB,SAAS,GAAGC,OAAO,CAACC,OAAR,CAAgBN,OAAO,CAACO,GAAR,CAAY,WAAZ,CAAhB,CAAhB;AACA,QAAIC,OAAO,GAAGH,OAAO,CAACC,OAAR,CAAgBN,OAAO,CAACO,GAAR,CAAY,SAAZ,CAAhB,CAAd;AACAF,IAAAA,OAAO,CAACI,GAAR,CAAY,CAACL,SAAD,EAAYI,OAAZ,CAAZ,EACGE,IADH,CACQ,UAASC,MAAT,EAAiB;AACrB,UAAIC,QAAQ,GAAGD,MAAM,CAAC,CAAD,CAArB;AACA,UAAIE,MAAM,GAAGF,MAAM,CAAC,CAAD,CAAnB;;AACA,UAAIC,QAAQ,IAAIC,MAAhB,EAAwB;AACtB,YAAIC,OAAO,GAAG;AACZ,0BAAgB,iCADJ;AAEZc,UAAAA,KAAK,EAAEhB,QAFK;AAGZiB,UAAAA,GAAG,EAAEhB;AAHO,SAAd;AAKA,eAAOC,OAAP;AACD;AACF,KAZH,EAaGJ,IAbH,CAaQ,UAAAoB,GAAG,EAAI;AACX/B,MAAAA,KAAK,CAAC;AACJgC,QAAAA,MAAM,EAAE,KADJ;AAEJZ,QAAAA,GAAG,EAAEQ,QAFD;AAGJb,QAAAA,OAAO,EAAEgB;AAHL,OAAD,CAAL,CAKGpB,IALH,CAKQ,UAAAoB,GAAG,EAAI;AACX,eAAO3B,QAAQ,CAAC2B,GAAD,CAAf;AACD,OAPH,EAQGG,KARH,CAQS,UAASC,KAAT,EAAgB;AACrBC,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BF,KAA5B;AACA,eAAO/B,QAAQ,CAAC+B,KAAK,CAACG,QAAP,CAAf;AACD,OAXH;AAYD,KA1BH;AA2BD,GAjOH;;AAAA,OAmOEc,MAnOF,GAmOW,UAAAhD,QAAQ,EAAI;AACnB,QAAIgB,GAAG,GAAGC,OAAO,CAACC,GAAR,CAAYC,kBAAtB;AACA,QAAIC,OAAO,GAAGH,OAAO,CAACC,GAAR,CAAYG,iBAA1B;AAEA,QAAIC,MAAM,GAAGL,OAAO,CAACC,GAAR,CAAY+B,uBAAzB;AACA,QAAIzB,QAAQ,GAAGR,GAAG,GAAG,GAAN,GAAYI,OAAZ,GAAsB,GAAtB,GAA4BE,MAA3C;AACA,QAAIrB,SAAS,GAAGC,OAAO,CAACC,OAAR,CAAgBN,OAAO,CAACO,GAAR,CAAY,WAAZ,CAAhB,CAAhB;AACA,QAAIC,OAAO,GAAGH,OAAO,CAACC,OAAR,CAAgBN,OAAO,CAACO,GAAR,CAAY,SAAZ,CAAhB,CAAd;AACAF,IAAAA,OAAO,CAACI,GAAR,CAAY,CAACL,SAAD,EAAYI,OAAZ,CAAZ,EACGE,IADH,CACQ,UAASC,MAAT,EAAiB;AACrB,UAAIC,QAAQ,GAAGD,MAAM,CAAC,CAAD,CAArB;AACA,UAAIE,MAAM,GAAGF,MAAM,CAAC,CAAD,CAAnB;;AACA,UAAIC,QAAQ,IAAIC,MAAhB,EAAwB;AACtB,YAAIC,OAAO,GAAG;AACZ,0BAAgB,iCADJ;AAEZc,UAAAA,KAAK,EAAEhB,QAFK;AAGZiB,UAAAA,GAAG,EAAEhB;AAHO,SAAd;AAKA,eAAOC,OAAP;AACD;AACF,KAZH,EAaGJ,IAbH,CAaQ,UAAAoB,GAAG,EAAI;AACX/B,MAAAA,KAAK,CAAC;AACJgC,QAAAA,MAAM,EAAE,KADJ;AAEJZ,QAAAA,GAAG,EAAEQ,QAFD;AAGJb,QAAAA,OAAO,EAAEgB;AAHL,OAAD,CAAL,CAKGpB,IALH,CAKQ,UAAAoB,GAAG,EAAI;AACX,eAAO3B,QAAQ,CAAC2B,GAAD,CAAf;AACD,OAPH,EAQGG,KARH,CAQS,UAASC,KAAT,EAAgB;AACrBC,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BF,KAA5B;AACA,eAAO/B,QAAQ,CAAC+B,KAAK,CAACG,QAAP,CAAf;AACD,OAXH;AAYD,KA1BH;AA2BD,GAtQH;AAAA;AAyQA,eAAepC,GAAf","sourcesContent":["// *******************Note*******************************\n// ##service: microservizio da chiamare\n// ##dataToPost: dati da inserire nel body della richiesta\n// (deve essere precedentemente formattato e passato come oggetto {})\n// ##query: da passare come null se la read è semplice, preformattata\n// come oggetto per essere passata direttamente se composta(ad es skip/limit/fields/filtri)\n// ##callback:funzione che nel componente da cui chiamo l'api gestirà la risposta per fornirla\n// al render\nimport Cookies from \"universal-cookie\";\nimport axios from \"axios\";\n\nlet cookies = new Cookies();\n\nexport class Api {\n  getCookies = callback => {\n    let userToken = Promise.resolve(cookies.get(\"userToken\"));\n    let userKey = Promise.resolve(cookies.get(\"userKey\"));\n    Promise.all([userToken, userKey]).then(function(result) {\n      let gotToken = result[0];\n      let gotKey = result[1];\n      if (gotToken && gotKey) {\n        let headers = [gotToken, gotKey];\n        return callback(headers);\n      } else {\n        return callback(undefined);\n      }\n    });\n  };\n\n  create = (dataToPost, callback) => {\n    let userToken = Promise.resolve(cookies.get(\"userToken\"));\n    let userKey = Promise.resolve(cookies.get(\"userKey\"));\n    let userEnv = Promise.resolve(cookies.get(\"userEnv\"));\n    let url = process.env.REACT_APP_SERV_URL;\n    let version = process.env.REACT_APP_VERSION;\n    let action = process.env.REACT_APP_ACTION_C;\n    let fullPath = url + \"/\" + version + \"/\" + action + \"/\" + userEnv;\n    Promise.all([userToken, userKey])\n      .then(function(result) {\n        let gotToken = result[0];\n        let gotKey = result[1];\n        if (gotToken && gotKey) {\n          let headers = {\n            \"Content-Type\": \"application/json; charset=utf-8\",\n            token: gotToken,\n            key: gotKey\n          };\n          return headers;\n        }\n      })\n      .then(res => {\n        axios({\n          method: \"post\",\n          url: fullPath,\n          headers: res,\n          data: dataToPost\n        })\n          .then(res => {\n            return callback(res);\n          })\n          .catch(function(error) {\n            console.log(\"error in api\", error);\n            return callback(error.response);\n          });\n      });\n  };\n\n  update = (dataToPost, callback) => {\n    let userToken = Promise.resolve(cookies.get(\"userToken\"));\n    let userKey = Promise.resolve(cookies.get(\"userKey\"));\n    let userEnv = Promise.resolve(cookies.get(\"userEnv\"));\n    let url = process.env.REACT_APP_SERV_URL;\n    let version = process.env.REACT_APP_VERSION;\n    let action = process.env.REACT_APP_ACTION_U;\n    let fullPath = url + \"/\" + version + \"/\" + action + \"/\" + userEnv;\n\n    Promise.all([userToken, userKey])\n      .then(function(result) {\n        let gotToken = result[0];\n        let gotKey = result[1];\n        if (gotToken && gotKey) {\n          let headers = {\n            \"Content-Type\": \"application/json; charset=utf-8\",\n            token: gotToken,\n            key: gotKey\n          };\n          return headers;\n        }\n      })\n      .then(res => {\n        axios({\n          method: \"post\",\n          url: fullPath,\n          headers: res,\n          data: dataToPost\n        })\n          .then(res => {\n            return callback(res);\n          })\n          .catch(function(error) {\n            console.log(\"error in api\", error);\n            return callback(error.response);\n          });\n      });\n  };\n\n  delete = (service, id, callback) => {\n    let userToken = Promise.resolve(cookies.get(\"userToken\"));\n    let userKey = Promise.resolve(cookies.get(\"userKey\"));\n    let userEnv = Promise.resolve(cookies.get(\"userEnv\"));\n    let url = process.env.REACT_APP_SERV_URL;\n    let version = process.env.REACT_APP_VERSION;\n    let action = process.env.REACT_APP_ACTION_D;\n    let fullPath = url + \"/\" + version + \"/\" + action + \"/\" + userEnv;\n\n    Promise.all([userToken, userKey])\n      .then(function(result) {\n        let gotToken = result[0];\n        let gotKey = result[1];\n        if (gotToken && gotKey) {\n          let headers = {\n            \"Content-Type\": \"application/json; charset=utf-8\",\n            token: gotToken,\n            key: gotKey\n          };\n          return headers;\n        }\n      })\n      .then(res => {\n        axios({\n          method: \"post\",\n          url: fullPath,\n          headers: res\n        })\n          .then(res => {\n            return callback(res);\n          })\n          .catch(function(error) {\n            console.log(\"error in api\", error);\n            return callback(error.response);\n          });\n      });\n  };\n\n  read = (env, query, callback) => {\n    let userToken = Promise.resolve(cookies.get(\"userToken\"));\n    let userKey = Promise.resolve(cookies.get(\"userKey\"));\n    let userEnv = Promise.resolve(cookies.get(\"userEnv\"));\n    let url = process.env.REACT_APP_SERV_URL;\n    let version = process.env.REACT_APP_VERSION;\n    let action = process.env.REACT_APP_ACTION_R;\n    let fullPath = url + \"/\" + version + \"/\" + action + \"/\" + env + \"/\" + query;\n    Promise.all([userToken, userKey])\n      .then(function(result) {\n        let gotToken = result[0];\n        let gotKey = result[1];\n        if (gotToken && gotKey) {\n          let headers = {\n            \"Content-Type\": \"application/json; charset=utf-8\",\n            token: gotToken,\n            key: gotKey\n          };\n          return headers;\n        }\n      })\n      .then(res => {\n        axios({\n          method: \"get\",\n          url: fullPath,\n          headers: res\n        })\n          .then(res => {\n            return callback(res);\n          })\n          .catch(function(error) {\n            return callback(error.response);\n          });\n      });\n  };\n\n  authentication = (dataToPost, callback) => {\n    let url = process.env.REACT_APP_SERV_URL;\n    let version = process.env.REACT_APP_VERSION;\n\n    let action = process.env.REACT_APP_ACTION_AUTH;\n    let fullPath = url + \"/\" + version + \"/\" + action;\n    axios({\n      method: \"post\",\n      url: fullPath,\n      headers: {\n        \"Content-Type\": \"application/json; charset=utf-8\"\n      },\n      data: dataToPost\n    })\n      .then(res => {\n        return callback(res);\n      })\n      .catch(function(error) {\n        console.log(\"error in api\", error);\n        return callback(error.response);\n      });\n  };\n\n  authorization = callback => {\n    let url = process.env.REACT_APP_SERV_URL;\n    let version = process.env.REACT_APP_VERSION;\n\n    let action = process.env.REACT_APP_ACTION_AUTHO;\n    let fullPath = url + \"/\" + version + \"/\" + action;\n    let userToken = Promise.resolve(cookies.get(\"userToken\"));\n    let userKey = Promise.resolve(cookies.get(\"userKey\"));\n    Promise.all([userToken, userKey])\n      .then(function(result) {\n        let gotToken = result[0];\n        let gotKey = result[1];\n        if (gotToken && gotKey) {\n          let headers = {\n            \"Content-Type\": \"application/json; charset=utf-8\",\n            token: gotToken,\n            key: gotKey\n          };\n          return headers;\n        }\n      })\n      .then(res => {\n        axios({\n          method: \"get\",\n          url: fullPath,\n          headers: res\n        })\n          .then(res => {\n            return callback(res);\n          })\n          .catch(function(error) {\n            console.log(\"error in api\", error);\n            return callback(error.response);\n          });\n      });\n  };\n\n  logout = callback => {\n    let url = process.env.REACT_APP_SERV_URL;\n    let version = process.env.REACT_APP_VERSION;\n\n    let action = process.env.REACT_APP_ACTION_LOGOUT;\n    let fullPath = url + \"/\" + version + \"/\" + action;\n    let userToken = Promise.resolve(cookies.get(\"userToken\"));\n    let userKey = Promise.resolve(cookies.get(\"userKey\"));\n    Promise.all([userToken, userKey])\n      .then(function(result) {\n        let gotToken = result[0];\n        let gotKey = result[1];\n        if (gotToken && gotKey) {\n          let headers = {\n            \"Content-Type\": \"application/json; charset=utf-8\",\n            token: gotToken,\n            key: gotKey\n          };\n          return headers;\n        }\n      })\n      .then(res => {\n        axios({\n          method: \"get\",\n          url: fullPath,\n          headers: res\n        })\n          .then(res => {\n            return callback(res);\n          })\n          .catch(function(error) {\n            console.log(\"error in api\", error);\n            return callback(error.response);\n          });\n      });\n  };\n}\n\nexport default Api;\n"]},"metadata":{},"sourceType":"module"}