{"ast":null,"code":"import _classCallCheck from \"/home/fefe/Develop/mucca-project/mucca_frontend_admin/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/fefe/Develop/mucca-project/mucca_frontend_admin/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/fefe/Develop/mucca-project/mucca_frontend_admin/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/fefe/Develop/mucca-project/mucca_frontend_admin/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/fefe/Develop/mucca-project/mucca_frontend_admin/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport { Component } from \"react\";\nimport axios from \"axios\";\nimport Cookies from \"universal-cookie\";\nvar cookies = new Cookies();\nexport var Login =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Login, _Component);\n\n  function Login() {\n    _classCallCheck(this, Login);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Login).apply(this, arguments));\n  }\n\n  _createClass(Login, [{\n    key: \"authorization\",\n    value: function authorization(token, key, callback) {\n      var authorizationUrl = process.env.REACT_APP_SERV_URL + \"/v1/authorization\";\n      console.log(\"authorization -> \", token, key);\n      axios({\n        method: \"get\",\n        url: authorizationUrl,\n        headers: {\n          \"Content-Type\": \"application/json\",\n          token: token,\n          key: key\n        },\n        data: \"\"\n      }).then(function (response) {\n        callback(true);\n      }).catch(function (error) {\n        cookies.remove(\"userName\", {\n          path: \"/\"\n        });\n        cookies.remove(\"userToken\", {\n          path: \"/\"\n        });\n        cookies.remove(\"userKey\", {\n          path: \"/\"\n        });\n        cookies.remove(\"userEnv\", {\n          path: \"/\"\n        });\n        callback(false);\n      });\n    }\n  }, {\n    key: \"authentication\",\n    value: function authentication(username, password, environment, callback) {\n      var authenticationUrl = process.env.REACT_APP_SERV_URL + \"/v1/authentication\";\n      var self = this;\n      axios({\n        method: \"post\",\n        url: authenticationUrl,\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        data: {\n          username: username,\n          password: password,\n          environment: environment\n        }\n      }).then(function (response) {\n        cookies.set(\"userToken\", response.data.data.token, {\n          path: \"/\"\n        });\n        cookies.set(\"userKey\", response.data.data.key, {\n          path: \"/\"\n        });\n        cookies.set(\"userEnv\", environment, {\n          path: \"/\"\n        });\n        cookies.set(\"userName\", username, {\n          path: \"/\"\n        });\n        self.authorization(cookies.get(\"userToken\"), cookies.get(\"userKey\"), callback);\n      }).catch(function (error) {\n        // cookies.remove(\"userToken\", { path: \"/\" });\n        // cookies.remove(\"userKey\", { path: \"/\" });\n        // cookies.remove(\"userEnv\", { path: \"/\" });\n        callback(false);\n      });\n    }\n  }, {\n    key: \"logout\",\n    value: function logout() {\n      var authorizationUrl = process.env.REACT_APP_SERV_URL + \"/v1/logout\";\n      axios({\n        method: \"get\",\n        url: authorizationUrl,\n        headers: {\n          \"Content-Type\": \"application/json\",\n          token: cookies.get(\"userToken\"),\n          key: cookies.get(\"userKey\")\n        }\n      }).then(function (response) {\n        console.log(\"logout request success\");\n        cookies.remove(\"userToken\", {\n          path: \"/\"\n        });\n        cookies.remove(\"userKey\", {\n          path: \"/\"\n        });\n        cookies.remove(\"userEnv\", {\n          path: \"/\"\n        });\n        window.location.reload();\n      }).catch(function (error) {\n        console.log(\"logout failure\");\n      });\n    }\n  }]);\n\n  return Login;\n}(Component);\nexport default Login;","map":{"version":3,"sources":["/home/fefe/Develop/mucca-project/mucca_frontend_admin/src/Login/Login.jsx"],"names":["Component","axios","Cookies","cookies","Login","token","key","callback","authorizationUrl","process","env","REACT_APP_SERV_URL","console","log","method","url","headers","data","then","response","catch","error","remove","path","username","password","environment","authenticationUrl","self","set","authorization","get","window","location","reload"],"mappings":"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","sourcesContent":["import { Component } from \"react\";\nimport axios from \"axios\";\nimport Cookies from \"universal-cookie\";\n\nconst cookies = new Cookies();\n\nexport class Login extends Component {\n  authorization(token, key, callback) {\n    let authorizationUrl = process.env.REACT_APP_SERV_URL + \"/v1/authorization\";\n    console.log(\"authorization -> \", token, key);\n\n    axios({\n      method: \"get\",\n      url: authorizationUrl,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        token: token,\n        key: key\n      },\n      data: \"\"\n    })\n      .then(function(response) {\n        callback(true);\n      })\n      .catch(function(error) {\n        cookies.remove(\"userName\", { path: \"/\" });\n        cookies.remove(\"userToken\", { path: \"/\" });\n        cookies.remove(\"userKey\", { path: \"/\" });\n        cookies.remove(\"userEnv\", { path: \"/\" });\n        callback(false);\n      });\n  }\n\n  authentication(username, password, environment, callback) {\n    let authenticationUrl =\n      process.env.REACT_APP_SERV_URL + \"/v1/authentication\";\n    var self = this;\n    axios({\n      method: \"post\",\n      url: authenticationUrl,\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      data: {\n        username: username,\n        password: password,\n        environment: environment\n      }\n    })\n      .then(function(response) {\n        cookies.set(\"userToken\", response.data.data.token, { path: \"/\" });\n        cookies.set(\"userKey\", response.data.data.key, { path: \"/\" });\n        cookies.set(\"userEnv\", environment, { path: \"/\" });\n        cookies.set(\"userName\", username, { path: \"/\" });\n        self.authorization(\n          cookies.get(\"userToken\"),\n          cookies.get(\"userKey\"),\n          callback\n        );\n      })\n      .catch(function(error) {\n        // cookies.remove(\"userToken\", { path: \"/\" });\n        // cookies.remove(\"userKey\", { path: \"/\" });\n        // cookies.remove(\"userEnv\", { path: \"/\" });\n        callback(false);\n      });\n  }\n\n  logout() {\n    let authorizationUrl = process.env.REACT_APP_SERV_URL + \"/v1/logout\";\n\n    axios({\n      method: \"get\",\n      url: authorizationUrl,\n      headers: {\n        \"Content-Type\": \"application/json\",\n        token: cookies.get(\"userToken\"),\n        key: cookies.get(\"userKey\")\n      }\n    })\n      .then(function(response) {\n        console.log(\"logout request success\");\n        cookies.remove(\"userToken\", { path: \"/\" });\n        cookies.remove(\"userKey\", { path: \"/\" });\n        cookies.remove(\"userEnv\", { path: \"/\" });\n        window.location.reload();\n      })\n      .catch(function(error) {\n        console.log(\"logout failure\");\n      });\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}